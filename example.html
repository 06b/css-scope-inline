<!DOCTYPE html>
<html>
	<head>
		<title>ðŸŒ˜ CSS Scope Inline Test Page</title>
		<!-- Optionally, use externally! <script src="script.js"></script> -->
		<script>
			// ðŸŒ˜ CSS Scope Inline (https://github.com/gnat/css-scope-inline)
			var cssScopeCount = 1
			new MutationObserver((mutations, observer) => {
				for (var mutation of mutations) {
					if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
						var addedNode = mutation.addedNodes[0]
						if (addedNode.nodeName !== 'STYLE') continue // Not a <style>
						if (!addedNode.parentNode || addedNode.parentNode?.tagName === 'HEAD') continue // Must have parent. Don't style <head>
						cssScopeCount++ // Ready.
						addedNode.parentNode.classList.add('self_'+cssScopeCount) // Make unique scope, example: .self_1234
						var pattern = new RegExp('(\.this|\.self|\.me)(?![A-Za-z0-9\_\-])', 'g') // Can use: .this .self .me
						addedNode.textContent = addedNode.textContent.replace(pattern, '.self_'+cssScopeCount)
					}
				}
			}).observe(document.documentElement, {childList: true, subtree: true})
		</script>
		<style>
			:root {
				--c-button: hsl(0 50% 20% / 100%);
				--c-button-hover: hsl(0 50% 40% / 100%);
			}
			html, body { background: #222; color: #ccc; font-size: 20px; } /* Prevent flashbang. */
			button {
				border-radius: 10px;
				padding: 10px 16px;
				font-size: 20px;
				border: 0;
				cursor: pointer;
				background: var(--c-button);
				color: #888;
			}
			button:hover {
				background: var(--c-button-hover);
			}
		</style>
	</head>
	<body>
		<div>
			<h1>ðŸ‘» Unstyled div.</h1>
			<ol>
				<li>Unstyled item.
				<li>Unstyled item.
			</ol>
		</div>

		<div>
			<style>
				.this { /* âœ¨ .this is where the magic happens. */
					border:none;
					font-family: Noto Sans, sans-serif;
					border-radius: 5px;
					box-shadow: 2px 2px 5px #00000044;
					padding:10px 20px;
					background: hsl(220 20% 50% / 100%);

					& ul, ol { /* âœ¨ CSS Nesting works! */
						padding: 5px 0;
					}
					& span { /* âœ¨ CSS Nesting works! */
						background: purple;
					}
				}
				li{
					list-style: disc inside;
					padding: 3px;
					padding-right: 10px;
					border-radius: 20px;
					border-radius: 20px;
				}
				.me ol li:nth-child(3) { /* âœ¨ .me is interchangeable! */
					background: hsl(220 50% 50% / 100%);
				}
				.self ol li:nth-child(4) { /* âœ¨ .self is interchangeable! */
					background: hsl(220 80% 50% / 100%);
				}
				h1 {
					font-size: 16px;
					line-height: 16px;
					padding: 0;
				}
			</style>
			<h1>ðŸŽƒ Styled div using .this</h1>
			<ol>
				<li>First styled item.
				<li>Second styled item and <span>modern nested CSS</span>.
				<li>ðŸ‘½ Using .me
				<li>ðŸ’€ Using .self
			</ol>
		</div>

		<br />
		<button onClick="window.open('https://github.com/gnat/css-scope-inline/blob/main/example.html');">ðŸ˜º Visit the source code for this page.</button>
	</body>
</html>

